{{ if eq .Page.Params.outdated true  }}
    <div class="ui warning message">
        <h2 class="header">Warning! - Outdated content</h2>
        <p>You are watching the speakers for a previous year!<br>
        Please find the most current schedule under: <a href="/schedule/{{ now.Year }}" style="font-weight: bold; text-decoration: underline;">Current schedule</a></p>
    </div>
{{ end }}

{{ $workshop_year := .Page.Params.workshop_year }}
{{ $path_prefix := printf "workshop/%s" $workshop_year }}

{{ .Content }}

{{ $workshops_to_show := slice }}
{{ range (where .Site.RegularPages "Type" "workshop") }}
    {{ if (strings.HasPrefix .File.Path $path_prefix) }}
        {{ $workshops_to_show = $workshops_to_show | append . }}
    {{ end }}
{{ end }}

{{ if gt (len $workshops_to_show) 0 }}
<section id="section-workshops" class="section-workshops section">
  <div class="container">
    <div class="row section-heading">
      <div class="col-lg">
        <div class="heading">
          <span class="stroke-text">Workshops</span>
          <div class="pl-90">
            <h2 class="mt-2">Workshops {{ $workshop_year }}</h2>
          </div>
        </div>
      </div>
    </div>
    <hr>

    <div class="row">
      {{ range (sort $workshops_to_show "Title") }}
        <div class="col-lg-9">
            <div class="speaker-info">
                <h4 class="mb-0 mt-3"><a href="{{ .Permalink }}"><i class="{{ .Params.Icon }}"></i> {{ .Title }}</a></h4>
                <p>Held by {{ .Params.Workshop_host }}<br>{{ .Description }}</p>
                <p><u><a href="{{ .Permalink }}">Read full details and description</a></u></p>
                <hr>
            </div>
        </div>
        <div class="col-lg-3 d-none d-lg-block">
            <div class="speaker-image">
                <img src="{{ .Params.Workshop_host_image | absURL }}" alt="{{ .Title }}" class="img-fluid rounded-circle" style="width: 100px;" loading="lazy">
            </div>
        </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}